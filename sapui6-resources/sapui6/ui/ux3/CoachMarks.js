jQuery.sap.declare("sapui6.ui.ux3.CoachMarks"),jQuery.sap.require("sap.ui.core.Control"),jQuery.sap.require("sap.ui.ux3.ToolPopup"),sap.ui.core.Control.extend("sapui6.ui.ux3.CoachMarks",{metadata:{library:"sapui6.ui.ux3",properties:{interval:{type:"int",defaultValue:2e3}}},coachmarks:[],coachmarksControl:[],coachmarksDirection:[],cnt:0,idx:-1,fnInterval:null,renderer:function(i,e){}}),sapui6.ui.ux3.CoachMarks.prototype.init=function(){this.oIntervalTrigger=new sap.ui.core.IntervalTrigger},sapui6.ui.ux3.CoachMarks.prototype.add=function(i,e,t){var a="";void 0!=t&&(a=t),this.coachmarks.push(e),this.coachmarksControl.push(i),this.coachmarksDirection.push(a),this.cnt++},sapui6.ui.ux3.CoachMarks.prototype.onGuideNumber=function(){for(var i=this.coachmarksControl.length,e=0;i>e;e++){var t=$("#"+this.coachmarksControl[e].getId()),a=t.offset().left,r=t.offset().top-5,o=this.getGuideHtml("coachmarks-guide-no-"+e,e+1,"sapui6_guideNumber","left:"+a+"px;top:"+r+"px;");$("#sapui6-coachmarks-div").append(o)}},sapui6.ui.ux3.CoachMarks.prototype.getGuideHtml=function(i,e,t,a,r){var o="",s="";void 0==r?(o="sapUiUx3TPArrow sapUiTPInverted sapUiUx3TPArrowUp",s="left:-28px;"):"above"==r?(o="sapUiUx3TPArrow sapUiTPInverted sapUiUx3TPArrowDown",s="left:10px;"):"left"==r?(o="sapUiUx3TPArrow sapUiTPInverted sapUiUx3TPArrowRight",s="left:-10px;"):"right"==r?(o="sapUiUx3TPArrow sapUiTPInverted sapUiUx3TPArrowLeft",s="top:5px;"):"below"==r?(o="sapUiUx3TPArrow sapUiTPInverted sapUiUx3TPArrowUp",s="left:-28px;"):(o="sapUiUx3TPArrow sapUiTPInverted sapUiUx3TPArrowUp",s="left:15px;");var p=[];return p.push('<div id="'+i+'" class="'+t+' sapUiInverted-CTX sapUiTPInverted sapUiUx3TP sapUiUx3TPNoButtons sapUiUx3TPNoTitle sapUiShd" aria-labelledby="__popup0-title __popup0-acc" role="dialog" tabindex="-1" data-sap-ui-popup="id-1449079278956-7" style="position: absolute; visibility: visible; z-index: 999; display: block; '+a+'">'),p.push('	<div id="'+i+'-arrow" class="'+o+'" style="'+s+'">'),p.push('		<div class="sapUiUx3TPArrowBorder"></div>'),p.push("	</div>"),p.push('	<div class="sapUiUx3TPContent">'),p.push(e),p.push("	</div>"),p.push("</div>"),p.join("")},sapui6.ui.ux3.CoachMarks.prototype.removeGuide=function(){$("#sapui6-coachmarks-div").remove()},sapui6.ui.ux3.CoachMarks.prototype.start=function(){if(this.coachmarks.length<1)return!1;0==$("#sapui6-coachmarks-div").length&&$(document.body).append('<div id="sapui6-coachmarks-div" style="position:absolute;left:0px;top:0px;opacity:0.6;display:block;z-index:900;background-color:#000000;width:'+$(document).width()+"px;height:"+$(document).height()+'px;"></div>'),this.onGuideNumber();var i=this.getInterval(),e=this,t="";this.fnInterval=function(){if(e.idx>-1&&$("#"+t).remove(),e.idx==e.coachmarks.length-1)return e.removeGuide(),e.oIntervalTrigger.removeListener(e.fnInterval),e.idx=-1,!1;e.idx++;var i=$("#coachmarks-guide-no-"+e.idx),a=i.offset().left,r=i.offset().top,o=e.coachmarks[e.idx],s=e.coachmarksDirection[e.idx],p="left:"+a+"px;top:"+r+"px;";p=""==s?"left:"+a+"px;top:"+(r+i.height()+20)+"px;":"above"==s?"left:"+a+"px;top:"+(r-40)+"px;":"right"==s?"left:"+(a+i.width())+"px;top:"+r+"px;":"left"==s?"right:"+a+"px;top:"+r+"px;":"left:"+a+"px;top:"+(r+i.height())+"px;";var u="coachmarks-guide-message-"+e.idx,n=e.getGuideHtml(u,o,"sapui6_coachmarks",p,s);if($("#sapui6-coachmarks-div").append(n),"left"==s){var c=$("#"+u).width();a-=c,$("#"+u).css("left",a+"px"),$("#"+u+"-arrow").css("left",c+6+"px"),$("#"+u).css("width",c+5+"px")}else if("above"==s){var c=$("#"+u).width(),d=$("#"+u).height();r-=d,0>r&&(r=0),$("#"+u).css("top",d+"px"),$("#"+u).css("width",c+5+"px")}t=u},this.oIntervalTrigger.setInterval(i),this.oIntervalTrigger.addListener(this.fnInterval)},sapui6.ui.ux3.CoachMarks.prototype.end=function(){this.oIntervalTrigger.removeListener(this.fnInterval)};