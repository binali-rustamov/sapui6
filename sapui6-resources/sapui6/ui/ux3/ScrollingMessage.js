jQuery.sap.declare("sapui6.ui.ux3.ScrollingMessage"),jQuery.sap.require("sap.ui.core.Control"),sap.ui.core.Control.extend("sapui6.ui.ux3.ScrollingMessage",{metadata:{library:"sapui6.ui.ux3",properties:{width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"100%"},headerHeight:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"30px"},bodyHeight:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"400px"},margin:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"5px"},iconHoverColor:{type:"sap.ui.core.CSSColor",group:"Misc",defaultValue:"#d9534f"},headerBackgroundColor:{type:"sap.ui.core.CSSColor",group:"Misc",defaultValue:"#fff"},headerTitleColor:{type:"sap.ui.core.CSSColor",group:"Misc",defaultValue:"#333"},title:{type:"string",defaultValue:"&nbsp;"},interval:{type:"int",defaultValue:4e3},direction:{type:"int",defaultValue:0},visibleItemCount:{type:"int",defaultValue:1},visible:{type:"boolean",defaultValue:!0},showBorder:{type:"boolean",defaultValue:!0},scroll:{type:"boolean",defaultValue:!0},collapsed:{type:"boolean",defaultValue:!0},expandIcon:{type:"string",group:"Misc",defaultValue:"sap-icon://slim-arrow-down"},collapseIcon:{type:"string",group:"Misc",defaultValue:"sap-icon://slim-arrow-up"}},defaultAggregation:"items",aggregations:{items:{type:"sap.ui.core.Control",multiple:!0,singularName:"item"}}},renderer:function(e,t){if(t.getVisible()){if(e.write("<div"),e.writeControlData(t),e.addStyle("width",t.getWidth()),e.addStyle("margin",t.getMargin()),e.writeStyles(),e.addClass("sapui6_sm"),e.writeClasses(),e.write(">"),e.write("<div"),e.addStyle("background-color",t.getHeaderBackgroundColor()),e.addStyle("color",t.getHeaderTitleColor()),t.getShowBorder()||e.addStyle("border","0px"),e.addStyle("height",t.getHeaderHeight()),e.writeStyles(),e.addClass("sapui6_sm-heading"),e.writeClasses(),e.write(">"),t.getCollapsed()){e.write("<span"),e.addClass("sapui6_sm-btn-right"),e.writeClasses(),e.write(">");var i=new sap.ui.core.Icon(t.getId()+"-sm-collapse-icon",{src:t.getExpandIcon(),press:t.collapse.bind(t)});i.setHoverColor(t.getIconHoverColor()),e.renderControl(i),e.write("</span>")}e.write('<span id="'+t.getId()+'-sm-title">'),e.write(t.getTitle()),e.write("</span>"),e.write("</div>"),e.write('<ul id="'+t.getId()+'-sm-content"'),e.addClass("sapui6_sm-list-group"),e.writeClasses(),e.addStyle("height","0px"),e.addStyle("display","none"),t.getScroll()&&e.addStyle("overflow","auto"),e.writeStyles(),e.write(">"),t.getItems().forEach(function(t,i){e.write('<li class="sapui6_sm-list-group-item">'),e.renderControl(t),e.write("</li>")}),e.write("</ul>"),e.write("</div>")}},onAfterRendering:function(){this.startMessage()}}),sapui6.ui.ux3.ScrollingMessage.prototype.startMessage=function(){for(var e=$("#"+this.getId()+"-sm-title"),t=this,i=0,s=this.getItems().length,a=this.getVisibleItemCount(),r="",l=0;a>l;l++)s>l&&(l>0&&(r+="<br>"),r+=$($("#"+t.getId()+"-sm-content li")[l]).html());e.html(r),i=a,window.setInterval(function(){i==s&&(i=0),r="";for(var l=0;a>l;l++)s>i&&(l>0&&(r+="<br>"),r+=$($("#"+t.getId()+"-sm-content li")[i]).html(),i++);e.html(r)},t.getInterval())},sapui6.ui.ux3.ScrollingMessage.prototype.collapse=function(){var e=$("#"+this.getId()+"-sm-content");if("block"==e.css("display")){sap.ui.getCore().byId(this.getId()+"-sm-collapse-icon").setSrc(this.getExpandIcon());var t=window.setInterval(function(){if("0px"==e.css("height"))window.clearInterval(t),e.css("display","none");else{parseInt(e.css("height").replace("px",""));0>e-30?e.css("height","0px"):e.css("height",parseInt(e.css("height").replace("px",""))-30+"px")}},10)}else{sap.ui.getCore().byId(this.getId()+"-sm-collapse-icon").setSrc(this.getCollapseIcon()),e.css("display","block");var i=this.getBodyHeight(),t=window.setInterval(function(){if(e.css("height")==i)window.clearInterval(t);else{var s=parseInt(e.css("height").replace("px",""));s+30>parseInt(i.replace("px",""))?e.css("height",i):e.css("height",parseInt(e.css("height").replace("px",""))+30+"px")}},10)}};