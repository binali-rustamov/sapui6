jQuery.sap.declare("sapui6.ui.layout.BorderedForm"),jQuery.sap.require("sap.ui.core.Control"),sap.ui.core.Control.extend("sapui6.ui.layout.BorderedForm",{metadata:{library:"sapui6.ui.layout",properties:{visible:{type:"boolean",group:"Behavior",defaultValue:!0},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},minusWidth:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"0px"},height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},margin:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},marginLeft:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},marginRight:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},marginTop:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},marginBottom:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},backgroundColor:{type:"string",group:"Appearance",defaultValue:null},columns:{type:"int",group:"Appearance",defaultValue:1},widths:{type:"sap.ui.core.CSSSize[]",group:"Appearance",defaultValue:null},borderColor:{type:"string",group:"Appearance",defaultValue:null},strongColor:{type:"string",group:"Appearance",defaultValue:null},labelBackgroundColor:{type:"string",group:"Appearance",defaultValue:null},labelBold:{type:"boolean",group:"Appearance",defaultValue:!1},labelAlign:{type:"string",group:"Appearance",defaultValue:null},fontSize:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},rowsBorder:{type:"boolean",group:"Appearance",defaultValue:!0},colsBorder:{type:"boolean",group:"Appearance",defaultValue:!0},textColor:{type:"string",group:"Appearance",defaultValue:null},title:{type:"string",defaultValue:null},titleColor:{type:"string",group:"Appearance",defaultValue:null},titleFontSize:{type:"string",group:"Dimension",defaultValue:null},resize:{type:"boolean",defaultValue:!0}},defaultAggregation:"button",aggregations:{button:{type:"sap.ui.commons.Button",multiple:!0,singularName:"button"},toolbar:{type:"sap.ui.commons.Toolbar",multiple:!1},item:{type:"sap.ui.core.Control",multiple:!0,singularName:"item"}}},settings:null,onBeforeRendering:function(){jQuery.sap.require("sap.ui.core.theming.Parameters"),this.getTitleColor()||this.setProperty("titleColor",sap.ui.core.theming.Parameters.get("sapTitleColor"),!0),this.getBorderColor()||this.setProperty("borderColor",sap.ui.core.theming.Parameters.get("sapUiBaseBorder"),!0),this.getStrongColor()||this.setProperty("strongColor",sap.ui.core.theming.Parameters.get("sapActiveColor"),!0),this.getLabelBackgroundColor()||this.setProperty("labelBackgroundColor",sap.ui.core.theming.Parameters.get("sapUiListHeaderBackground"),!0),this.getFontSize()||this.setProperty("fontSize",sap.ui.core.theming.Parameters.get("sapUiDesktopFontSize"),!0),this.getTitleFontSize()||this.setProperty("titleFontSize",sap.ui.core.theming.Parameters.get("sapUiFontHeader4Size"),!0),this.getBackgroundColor()||this.setProperty("backgroundColor",sap.ui.core.theming.Parameters.get("sapUiTableRowBG"),!0),this.getTextColor()||this.setProperty("textColor",sap.ui.core.theming.Parameters.get("sapTextColor"),!0)},renderer:function(e,t){if(t.getVisible()&&t.settings){if(e.write("<div"),e.writeControlData(t),e.addClass("sapui6_formLayout"),e.writeClasses(),t.getWidth()&&e.addStyle("width",t.getWidth()),t.getMargin()&&e.addStyle("margin",t.getMargin()),t.getMarginLeft()&&e.addStyle("margin-left",t.getMarginLeft()),t.getMarginRight()&&e.addStyle("margin-right",t.getMarginRight()),t.getMarginTop()&&e.addStyle("margin-top",t.getMarginTop()),t.getMarginBottom()&&e.addStyle("margin-bottom",t.getMarginBottom()),e.writeStyles(),e.write(">"),t.getToolbar()?(e.write("<div>"),e.renderControl(t.getToolbar()),e.write("</div>")):(t.getButton().length>0||t.getTitle())&&(e.write("<div"),0==t.getButton().length&&(e.addStyle("margin-bottom","5px"),e.writeStyles()),e.write(">"),t.getButton().length>0&&(e.write("<span"),e.addClass("btn-right"),e.writeClasses(),e.write(">"),t.getButton().forEach(function(t,r){e.write("<span style='margin-left:5px;'>"),e.renderControl(t),e.write("</span>")})),e.write("</span>"),t.getTitle()&&(e.write("<span"),e.addClass("title"),e.writeClasses(),e.addStyle("color",t.getTitleColor()),e.addStyle("font-size",t.getTitleFontSize()),t.getStrongColor()&&e.addStyle("border-left-color",t.getStrongColor()),e.writeStyles(),e.write(">"),e.write(t.getTitle()),e.write("</span>")),e.write("</div>")),e.write("<table"),e.addStyle("border-top-color",t.getStrongColor()),e.addStyle("border-left-color",t.getBorderColor()),e.addStyle("border-right-color",t.getBorderColor()),e.addStyle("border-bottom-color",t.getBorderColor()),e.addStyle("font-size",t.getFontSize()),e.addStyle("background-color",t.getBackgroundColor()),e.addStyle("color",t.getTextColor()),e.writeStyles(),e.write(">"),t.getWidths()){e.write("<colgroup>");var r=t.getWidths().length;r>t.getColumns()&&(r=t.getColumns());for(var i=0;r>i;i++)e.write("<col"),e.addStyle("width",t.getWidths()[i]),e.writeStyles(),e.write("/>");e.write("</colgroup>")}e.write("<tbody>");for(var o=[],i=0;s>i;i++)o.push(1);for(var a=t.getItem(),l=0,n=0,s=t.getColumns(),g=t.settings.length,i=0;g>i;i++){var d=t.settings[i],p=n;void 0!=d.rowspan&&(o[p]=d.rowspan);var u=d.colspan;void 0==u?(n+=2,u=2):(n+=parseInt(u),u=parseInt(u));var h=u/2;if(n/2%s==h&&(e.write("<tr"),void 0!=d.id&&e.writeAttribute("id",d.id),void 0!=d.display&&e.addStyle("display",d.display),t.getRowsBorder()&&e.addStyle("border-bottom","1px solid "+t.getBorderColor()),(void 0!=d.display||t.getRowsBorder())&&e.writeStyles(),e.write(">")),e.write("<td"),e.addStyle("background-color",t.getLabelBackgroundColor()),t.getLabelBold()&&e.addStyle("font-weight","bold"),t.getLabelAlign()&&e.addStyle("text-align",t.getLabelAlign()),t.getColsBorder()&&e.addStyle("border-right","1px solid "+t.getBorderColor()),(t.getLabelBackgroundColor()||t.getLabelBold()||t.getColsBorder()||t.getLabelAlign())&&e.writeStyles(),e.addClass("label"),e.writeClasses(),void 0!=d.rowspan&&e.writeAttribute("rowspan",d.rowspan),e.write(">"),void 0!=d.label){var y=new sap.ui.commons.Label({text:d.label});d.required&&y.setRequired(d.required),d.requiredAtBegin&&y.setRequiredAtBegin(d.requiredAtBegin),e.renderControl(y)}e.write("</td>"),e.write("<td"),void 0!=d.colspan?e.writeAttribute("colspan",parseInt(d.colspan)-1):i==g-1&&e.writeAttribute("colspan",s-(n-1)),void 0!=d.rowspan&&e.writeAttribute("rowspan",d.rowspan),t.getColsBorder()&&(e.addStyle("border-right","1px solid "+t.getBorderColor()),e.writeStyles()),e.write(">"),void 0!=d.element&&d.element.forEach(function(t,r){e.write("<span"),0==r&&d.marginLeft?(e.addStyle("margin-left",d.marginLeft),e.writeStyles()):r<d.element.length-1&&(e.addStyle("margin-right","5px"),e.writeStyles()),e.write(">"),e.renderControl(a[l]),l++,e.write("</span>")}),e.write("</td>"),o[p]>1&&void 0==d.rowspan&&(n+=2,o[p]-=1),(n==s||i==g-1)&&(e.write("</tr>"),n=0)}e.write("</tbody>"),e.write("</table>"),e.write("</div>")}},onAfterRendering:function(){var e=this,t=$("#"+this.getId()),r=t.parent().width();if(0==r&&this.getWidth().indexOf("%")>-1)var i=window.setInterval(function(){if(r=t.parent().width(),r>0){window.clearInterval(i),objWidth=r*(parseFloat(e.getWidth().split("%")[0])/100);var o=0;e.getMarginLeft()||e.getMarginRight()?(e.getMarginLeft()&&(o+=parseInt(e.getMarginLeft().split("px")[0])),e.getMarginRight()&&(o+=parseInt(e.getMarginRight().split("px")[0]))):e.getMargin()&&(o=2*parseInt(e.getMargin().split("px")[0])),$("#"+e.getId()).css("width",String(objWidth-o-parseInt(e.getMinusWidth().split("px")[0]))+"px")}},100);else if(this.getWidth().indexOf("px")>-1){var o=this.getWidth().split("px")[0];$("#"+this.getId()).css("width",String(o-a-parseInt(this.getMinusWidth().split("px")[0]))+"px")}else if(t.outerWidth()>=r){var a=0;this.getMarginLeft()||this.getMarginRight()?(this.getMarginLeft()&&(a+=parseInt(this.getMarginLeft().split("px")[0])),this.getMarginRight()&&(a+=parseInt(this.getMarginRight().split("px")[0]))):this.getMargin()&&(a=2*parseInt(this.getMargin().split("px")[0])),$("#"+this.getId()).css("width",String(r-a-parseInt(this.getMinusWidth().split("px")[0]))+"px")}if(this.getResize()){var l=parseFloat($("#"+this.getId()).width()/$(window).width());jQuery.sap.delayedCall(50,e,function(){e.resizeLayout(l)}),$(window).resize(function(){jQuery.sap.delayedCall(50,e,function(){e.resizeLayout(l)})})}}}),sapui6.ui.layout.BorderedForm.prototype.resizeLayout=function(e){$("#"+this.getId()).css("width",String(parseInt($(window).width()*e))+"px");var t=$("#"+this.getId()),r=t.parent().width();if(t.outerWidth()>=r){var i=0;this.getMarginLeft()||this.getMarginRight()?(this.getMarginLeft()&&(i+=parseInt(this.getMarginLeft().split("px")[0])),this.getMarginRight()&&(i+=parseInt(this.getMarginRight().split("px")[0]))):this.getMargin()&&(i=2*parseInt(this.getMargin().split("px")[0])),$("#"+this.getId()).css("width",String(r-i-parseInt(this.getMinusWidth().split("px")[0]))+"px")}},sapui6.ui.layout.BorderedForm.prototype.set=function(e){this.settings=e;var t=this;this.settings.forEach(function(e){e.element.forEach(function(e){t.addAggregation("item",e)})})};